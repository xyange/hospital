<?xml version="1.0" encoding="UTF-8"?>



<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.wyzy.hospital.cyclopedia.mapper.TagMapper">

  <resultMap id="tagMap" type="com.wyzy.hospital.cyclopedia.dto.TagDTO">
                  <id property="tagId" column="tag_id"/>
                        <result property="tagName" column="tag_name"/>
	                    <result property="tagImage" column="tag_image"/>
	  <collection property="foodDetailsDTOList" resultMap="foodDetailsDTOMap"/>
  </resultMap>
	<resultMap id="foodDetailsDTOMap" type="com.wyzy.hospital.cyclopedia.dto.FoodDetailsDTO">
			<id property="foodId" column="food_id"/>
			<result property="foodName" column="food_name"/>
			<result property="foodKcal" column="food_kcal"/>
			<result property="foodKilojoules" column="food_kilojoules"/>
			<result property="foodHeat" column="food_heat"/>
			<result property="foodProtein" column="food_protein"/>
			<result property="foodFat" column="food_fat"/>
			<result property="foodCarbohydrates" column="food_carbohydrates"/>
			<result property="foodCholesterol" column="food_cholesterol"/>
			<result property="foodDietaryFiber" column="food_dietary_fiber"/>
			<result property="foodIron" column="food_iron"/>
			<result property="foodCalcium" column="food_calcium"/>
			<result property="foodPotassium" column="food_potassium"/>
			<result property="foodMagnesium" column="food_magnesium"/>
			<result property="foodAcid" column="food_acid"/>
			<result property="foodZinc" column="food_zinc"/>
			<result property="foodPurine" column="food_purine"/>
			<result property="foodSodium" column="food_sodium"/>
			<result property="foodSaturatedFat" column="food_saturated_fat"/>
			<result property="foodGi" column="food_GI"/>
			<result property="foodGl" column="food_GL"/>
			<result property="foodLevelId" column="food_level_id"/>
			<result property="foodImage" column="food_image"/>
			<result property="foodReferralRate" column="food_referral_rate"/>
			<result property="foodExistStatus" column="food_exist_status"/>
			<result property="foodAuditStatus" column="food_audit_status"/>
			<result property="foodUploadAdmin" column="food_upload_admin"/>
			<result property="foodExamineAdmin" column="food_examine_admin"/>
			<result property="foodCheckPassTime" column="food_check_pass_time"/>
			<result property="foodAuditTime" column="food_audit_time"/>
			<result property="foodUploadTime" column="food_upload_time"/>
			<result property="createTime" column="create_time"/>
			<result property="updateTime" column="update_time"/>
	</resultMap>
	<select id="selectTagFood" resultMap="tagMap">
               SELECT et.tag_id,tag_name,tag_image,d.*
              FROM food_tag as et left join food_details d on et.food_details_id=d.food_id
              left  join tag t on t.tag_id=et.tag_id where et.tag_id=#{tid} AND food_audit_status!='2' AND `food_exist_status`='1'
	</select>

</mapper>
